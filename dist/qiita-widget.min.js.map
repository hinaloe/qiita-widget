{"version":3,"file":"qiita-widget.min.js","sources":["qiita-widget.js"],"names":["ViewQiitaWidget","__bind","fn","me","apply","arguments","selector","xhr","this","get","window","XDomainRequest","XMLHttpRequest","onerror","parsepush","data","target","d","li","link","s","title","u","_i","_len","document","createElement","length","href","url","textContent","appendChild","user","url_name","className","e","console","error","prototype","area","count","i","req","screen_name","uri","urlbase","querySelectorAll","getAttribute","removeAttribute","onload","res","JSON","parse","responseText","open","send","call"],"mappings":";CAAA,WACE,GAAIA,GACFC,EAAS,SAASC,EAAIC,GAAK,MAAO,YAAY,MAAOD,GAAGE,MAAMD,EAAIE,YAEpEL,GAAkB,WAGhB,QAASA,GAAgBM,GACvB,GAAIC,EAGJ,IAFAC,KAAKF,SAAuB,MAAZA,EAAmBA,EAAW,sBAC9CE,KAAKC,IAAMR,EAAOO,KAAKC,IAAKD,MACS,mBAA1BE,QAAOC,eAChBJ,EAAMI,mBACD,CAAA,GAAqC,mBAA1BD,QAAOE,eAGvB,MAFAL,GAAMK,eAIRJ,KAAKD,IAAMA,EAbb,GAAIM,GAASC,CAuEb,OAvDAA,GAAY,SAASC,EAAMC,GACzB,GAAIC,GAAGC,EAAIC,EAAMC,EAAGC,EAAOC,EAAGC,EAAIC,CAGlC,KAFAJ,EAAIK,SAASC,cAAc,OAC3BJ,EAAIG,SAASC,cAAc,MACtBH,EAAK,EAAGC,EAAOT,EAAKY,OAAaH,EAALD,EAAWA,IAC1CN,EAAIF,EAAKQ,GACTJ,EAAOM,SAASC,cAAc,KAC9BP,EAAKS,KAAOX,EAAEY,IACdV,EAAKW,YAAcb,EAAEI,MACrBF,EAAKH,OAAS,SACdE,EAAKO,SAASC,cAAc,MAC5BR,EAAGa,YAAYZ,GACfG,EAAES,YAAYb,EAEhBG,GAAQI,SAASC,cAAc,MAC/BL,EAAMS,YAAc,GAAKf,EAAK,GAAGiB,KAAKC,SAAW,QACjDb,EAAEW,YAAYV,GACdD,EAAEW,YAAYT,GACdF,EAAEc,UAAY,eACdlB,EAAOe,YAAYX,IAGrBP,EAAU,SAASsB,GACjBC,QAAQC,MAAMF,IAGhBnC,EAAgBsC,UAAU7B,IAAM,WAC9B,GAAI8B,GAAMC,EAAOC,EAAGC,EAAKC,EAAaC,EAAKC,EAAStB,EAAIC,CAExD,KADAe,EAAOd,SAASqB,iBAAiBtC,KAAKF,UACjCiB,EAAK,EAAGC,EAAOe,EAAKZ,OAAaH,EAALD,EAAWA,IAC1CkB,EAAIF,EAAKhB,GACToB,EAAcF,EAAEM,aAAa,aAC7BF,EAAU,oBACVD,EAAM,iBAAmBD,EAAc,SACvCH,EAAQC,EAAEM,aAAa,eAAiB,KACxCN,EAAEO,gBAAgB,qBAClBN,EAAM,GAAIlC,MAAKD,IACfmC,EAAIO,OAAS,WACX,GAAIC,EACJA,GAAMC,KAAKC,MAAM5C,KAAK6C,cACtBvC,EAAUoC,EAAKT,IAEjBC,EAAI7B,QAAUA,EACd6B,EAAIY,KAAK,MAAO,GAAKT,EAAUD,EAAM,aAAeJ,GAAO,GAC3DE,EAAIa,QAIRvD,EAAgBS,IAAM,SAASW,GAC7B,GAAIqB,EAGJ,OAFAA,GAAI,GAAIjC,MAAKY,GACbqB,EAAEhC,MACKgC,GAGFzC,OAIRwD,KAAKhD","sourcesContent":["(function() {\n  var ViewQiitaWidget,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  ViewQiitaWidget = (function() {\n    var onerror, parsepush;\n\n    function ViewQiitaWidget(selector) {\n      var xhr;\n      this.selector = selector != null ? selector : \"[data-qiita-widget]\";\n      this.get = __bind(this.get, this);\n      if (typeof window.XDomainRequest !== \"undefined\") {\n        xhr = XDomainRequest;\n      } else if (typeof window.XMLHttpRequest !== \"undefined\") {\n        xhr = XMLHttpRequest;\n      } else {\n        return;\n      }\n      this.xhr = xhr;\n    }\n\n    parsepush = function(data, target) {\n      var d, li, link, s, title, u, _i, _len;\n      s = document.createElement(\"div\");\n      u = document.createElement(\"ul\");\n      for (_i = 0, _len = data.length; _i < _len; _i++) {\n        d = data[_i];\n        link = document.createElement(\"a\");\n        link.href = d.url;\n        link.textContent = d.title;\n        link.target = \"_blank\";\n        li = document.createElement(\"li\");\n        li.appendChild(link);\n        u.appendChild(li);\n      }\n      title = document.createElement(\"h2\");\n      title.textContent = \"\" + data[0].user.url_name + \"さんの投稿\";\n      s.appendChild(title);\n      s.appendChild(u);\n      s.className = \"qiita-widget\";\n      target.appendChild(s);\n    };\n\n    onerror = function(e) {\n      console.error(e);\n    };\n\n    ViewQiitaWidget.prototype.get = function() {\n      var area, count, i, req, screen_name, uri, urlbase, _i, _len;\n      area = document.querySelectorAll(this.selector);\n      for (_i = 0, _len = area.length; _i < _len; _i++) {\n        i = area[_i];\n        screen_name = i.getAttribute(\"data-name\");\n        urlbase = \"https://qiita.com\";\n        uri = \"/api/v1/users/\" + screen_name + \"/items\";\n        count = i.getAttribute(\"data-count\") || \"10\";\n        i.removeAttribute(\"data-qiita-widget\");\n        req = new this.xhr();\n        req.onload = function() {\n          var res;\n          res = JSON.parse(this.responseText);\n          parsepush(res, i);\n        };\n        req.onerror = onerror;\n        req.open(\"GET\", \"\" + urlbase + uri + \"?per_page=\" + count, true);\n        req.send();\n      }\n    };\n\n    ViewQiitaWidget.get = function(s) {\n      var i;\n      i = new this(s);\n      i.get();\n      return i;\n    };\n\n    return ViewQiitaWidget;\n\n  })();\n\n}).call(this);\n"]}